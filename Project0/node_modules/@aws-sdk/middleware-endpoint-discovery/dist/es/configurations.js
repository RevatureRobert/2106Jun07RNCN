var ENV_ENDPOINT_DISCOVERY = ["AWS_ENABLE_ENDPOINT_DISCOVERY", "AWS_ENDPOINT_DISCOVERY_ENABLED"];
var CONFIG_ENDPOINT_DISCOVERY = "endpoint_discovery_enabled";
var isFalsy = function (value) { return ["false", "0"].indexOf(value) >= 0; };
export var NODE_ENDPOINT_DISCOVERY_CONFIG_OPTIONS = {
    environmentVariableSelector: function (env) {
        for (var i = 0; i < ENV_ENDPOINT_DISCOVERY.length; i++) {
            var envKey = ENV_ENDPOINT_DISCOVERY[i];
            if (envKey in env) {
                var value = env[envKey];
                if (value === "") {
                    throw Error("Environment variable " + envKey + " can't be empty of undefined, got \"" + value + "\"");
                }
                // @ts-ignore Argument of type 'string | undefined' is not assignable to parameter of type 'string'
                return !isFalsy(value);
            }
        }
    },
    configFileSelector: function (profile) {
        if (CONFIG_ENDPOINT_DISCOVERY in profile) {
            var value = profile[CONFIG_ENDPOINT_DISCOVERY];
            if (value === undefined) {
                throw Error("Shared config entry " + CONFIG_ENDPOINT_DISCOVERY + " can't be undefined, got \"" + value + "\"");
            }
            return !isFalsy(value);
        }
    },
    default: undefined,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlndXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29uZmlndXJhdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsSUFBTSxzQkFBc0IsR0FBRyxDQUFDLCtCQUErQixFQUFFLGdDQUFnQyxDQUFDLENBQUM7QUFDbkcsSUFBTSx5QkFBeUIsR0FBRyw0QkFBNEIsQ0FBQztBQUUvRCxJQUFNLE9BQU8sR0FBRyxVQUFDLEtBQWEsSUFBSyxPQUFBLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQWxDLENBQWtDLENBQUM7QUFFdEUsTUFBTSxDQUFDLElBQU0sc0NBQXNDLEdBQStDO0lBQ2hHLDJCQUEyQixFQUFFLFVBQUMsR0FBRztRQUMvQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3RELElBQU0sTUFBTSxHQUFHLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pDLElBQUksTUFBTSxJQUFJLEdBQUcsRUFBRTtnQkFDakIsSUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUMxQixJQUFJLEtBQUssS0FBSyxFQUFFLEVBQUU7b0JBQ2hCLE1BQU0sS0FBSyxDQUFDLDBCQUF3QixNQUFNLDRDQUFzQyxLQUFLLE9BQUcsQ0FBQyxDQUFDO2lCQUMzRjtnQkFDRCxtR0FBbUc7Z0JBQ25HLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7YUFDeEI7U0FDRjtJQUNILENBQUM7SUFDRCxrQkFBa0IsRUFBRSxVQUFDLE9BQU87UUFDMUIsSUFBSSx5QkFBeUIsSUFBSSxPQUFPLEVBQUU7WUFDeEMsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUM7WUFDakQsSUFBSSxLQUFLLEtBQUssU0FBUyxFQUFFO2dCQUN2QixNQUFNLEtBQUssQ0FBQyx5QkFBdUIseUJBQXlCLG1DQUE2QixLQUFLLE9BQUcsQ0FBQyxDQUFDO2FBQ3BHO1lBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUN4QjtJQUNILENBQUM7SUFDRCxPQUFPLEVBQUUsU0FBUztDQUNuQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTG9hZGVkQ29uZmlnU2VsZWN0b3JzIH0gZnJvbSBcIkBhd3Mtc2RrL25vZGUtY29uZmlnLXByb3ZpZGVyXCI7XG5cbmNvbnN0IEVOVl9FTkRQT0lOVF9ESVNDT1ZFUlkgPSBbXCJBV1NfRU5BQkxFX0VORFBPSU5UX0RJU0NPVkVSWVwiLCBcIkFXU19FTkRQT0lOVF9ESVNDT1ZFUllfRU5BQkxFRFwiXTtcbmNvbnN0IENPTkZJR19FTkRQT0lOVF9ESVNDT1ZFUlkgPSBcImVuZHBvaW50X2Rpc2NvdmVyeV9lbmFibGVkXCI7XG5cbmNvbnN0IGlzRmFsc3kgPSAodmFsdWU6IHN0cmluZykgPT4gW1wiZmFsc2VcIiwgXCIwXCJdLmluZGV4T2YodmFsdWUpID49IDA7XG5cbmV4cG9ydCBjb25zdCBOT0RFX0VORFBPSU5UX0RJU0NPVkVSWV9DT05GSUdfT1BUSU9OUzogTG9hZGVkQ29uZmlnU2VsZWN0b3JzPGJvb2xlYW4gfCB1bmRlZmluZWQ+ID0ge1xuICBlbnZpcm9ubWVudFZhcmlhYmxlU2VsZWN0b3I6IChlbnYpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEVOVl9FTkRQT0lOVF9ESVNDT1ZFUlkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVudktleSA9IEVOVl9FTkRQT0lOVF9ESVNDT1ZFUllbaV07XG4gICAgICBpZiAoZW52S2V5IGluIGVudikge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGVudltlbnZLZXldO1xuICAgICAgICBpZiAodmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcihgRW52aXJvbm1lbnQgdmFyaWFibGUgJHtlbnZLZXl9IGNhbid0IGJlIGVtcHR5IG9mIHVuZGVmaW5lZCwgZ290IFwiJHt2YWx1ZX1cImApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgQXJndW1lbnQgb2YgdHlwZSAnc3RyaW5nIHwgdW5kZWZpbmVkJyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnc3RyaW5nJ1xuICAgICAgICByZXR1cm4gIWlzRmFsc3kodmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY29uZmlnRmlsZVNlbGVjdG9yOiAocHJvZmlsZSkgPT4ge1xuICAgIGlmIChDT05GSUdfRU5EUE9JTlRfRElTQ09WRVJZIGluIHByb2ZpbGUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcHJvZmlsZVtDT05GSUdfRU5EUE9JTlRfRElTQ09WRVJZXTtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IEVycm9yKGBTaGFyZWQgY29uZmlnIGVudHJ5ICR7Q09ORklHX0VORFBPSU5UX0RJU0NPVkVSWX0gY2FuJ3QgYmUgdW5kZWZpbmVkLCBnb3QgXCIke3ZhbHVlfVwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gIWlzRmFsc3kodmFsdWUpO1xuICAgIH1cbiAgfSxcbiAgZGVmYXVsdDogdW5kZWZpbmVkLFxufTtcbiJdfQ==